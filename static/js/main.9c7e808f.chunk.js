(this["webpackJsonpgoit-react-hw-03-image-finder"]=this["webpackJsonpgoit-react-hw-03-image-finder"]||[]).push([[0],{16:function(e,t,a){e.exports={container:"Searchbar_container__wLyEe",form:"Searchbar_form__dp5mp",input:"Searchbar_input__iPDOR",button:"Searchbar_button__3LuIZ"}},32:function(e,t,a){e.exports={imageItem:"ImageGalleryItem_imageItem__3qTtS",image:"ImageGalleryItem_image__2GSj2"}},33:function(e,t,a){e.exports={button:"Button_button__2oesr"}},34:function(e,t,a){e.exports={overlay:"Modal_overlay__1qeg1",modal:"Modal_modal__3pxYq"}},47:function(e,t,a){e.exports={imageGallery:"ImageGallery_imageGallery__2ZXmA"}},55:function(e,t,a){},88:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(11),c=a.n(o),i=(a(55),a(56),a(19)),s=(a(57),a(6)),l=a(12),u=a(13),m=a(15),g=a(14),b=a(45),f=a.n(b),h=function(e,t,a){var n="".concat("https://pixabay.com/api/","?image_type=photo&orientation=horizontal&q=").concat(a,"&page=").concat(e,"&per_page=").concat(t,"&key=").concat("24796652-91261c2217f863e1b8ad91622");return f.a.get(n).then((function(e){return 200===e.status&&0!==e.data.hits.length?e.data:null}))},d=a(46),j=a.n(d),p=a(16),y=a.n(p),v=a(1),O=function(e){Object(m.a)(a,e);var t=Object(g.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={query:""},e.onChangeQuery=function(t){e.setState({query:t.target.value})},e.onSubmitForm=function(t){var a=e.state.query.trim();t.preventDefault(),e.props.onSetQuery(a)},e}return Object(u.a)(a,[{key:"render",value:function(){return Object(v.jsx)("header",{className:y.a.container,children:Object(v.jsxs)("form",{className:y.a.form,onSubmit:this.onSubmitForm,children:[Object(v.jsx)("button",{type:"submit",className:y.a.button,children:Object(v.jsx)(j.a,{className:y.a.icon,style:{width:"90%",height:"90%",fill:"blue"}})}),Object(v.jsx)("input",{className:y.a.input,value:this.state.query,type:"text",name:"search",autoComplete:"off",autoFocus:!0,placeholder:"Search images and photos",onChange:this.onChangeQuery})]})})}}]),a}(n.Component),L=a(47),I=a.n(L),x=a(32),_=a.n(x);var k=function(e){var t=e.webformatURL,a=e.largeImageURL,n=e.tags,r=e.myRef,o=void 0===r?null:r,c=e.onClickImg;return Object(v.jsx)("li",{className:_.a.imageItem,ref:o,onClick:function(e){c(e.target)},children:Object(v.jsx)("img",{src:t,"data-src":a,className:_.a.image,alt:n})})};function w(e){var t=e.itemsImg,a=e.myRef,n=e.onClickImg;return Object(v.jsx)("ul",{className:I.a.imageGallery,children:t&&t.map((function(e,t,r){return Object(v.jsx)(k,{webformatURL:e.webformatURL,largeImageURL:e.largeImageURL,tags:e.tags,myRef:t===r.length-12?a:null,onClickImg:n},e.id)}))})}var R=a(33),S=a.n(R);var C,P=function(e){var t=e.onClickMore;return Object(v.jsx)("div",{className:S.a.blockMore,children:Object(v.jsx)("button",{type:"button",className:S.a.button,onClick:t,children:"Load more..."})})},U=a(48),N=a(10),M=a(49),Q=a.n(M),q=Object(N.css)(C||(C=Object(U.a)(["\n  display: block;\n  margin: 10px auto;\n"])));var D=function(){return Object(v.jsx)(Q.a,{color:"rgb(6, 255, 247)",loading:true,css:q,size:50})},G=a(34),T=a.n(G),A=document.querySelector("#root-modal"),E=function(e){Object(m.a)(a,e);var t=Object(g.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).onCloseKey=function(t){"Escape"===t.code&&e.props.onCloseModal()},e}return Object(u.a)(a,[{key:"componentDidMount",value:function(){window.addEventListener("keydown",this.onCloseKey)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("keydown",this.onCloseKey)}},{key:"render",value:function(){var e=this.props,t=e.onCloseModal,a=e.item,n=a.src,r=a.tags;return Object(o.createPortal)(Object(v.jsx)("div",{className:T.a.overlay,onClick:function(e){e.target===e.currentTarget&&t()},children:Object(v.jsx)("div",{className:T.a.modal,children:Object(v.jsx)("img",{src:n,alt:r})})}),A)}}]),a}(n.Component),F=function(e){Object(m.a)(a,e);var t=Object(g.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];return(e=t.call.apply(t,[this].concat(o))).state={itemLooking:null,searchQuery:"",isLoading:!1,isLastPage:!1,itemsImg:[],myRef:r.a.createRef(),currentPage:1,perPage:12,totalPage:0},e.clearData=function(){e.setState({itemsImg:[],totalPage:0,currentPage:1,isLastPage:!0,isLoading:!1})},e.scrollToRef=function(e){var t=e.current.offsetTop-80;window.scrollTo({top:t,behavior:"smooth"})},e.loadItemImg=function(){e.setState({isLoading:!0})},e.setSearchQuery=function(t){e.setState({itemsImg:[],searchQuery:t,isLoading:!!t,currentPage:1})},e.setItemLooking=function(t){e.setState({itemLooking:{src:t.dataset.src,tags:t.alt}})},e.clearItemLooking=function(){e.setState({itemLooking:null})},e}return Object(u.a)(a,[{key:"componentDidUpdate",value:function(e,t){var a=this,n=this.state,r=n.perPage,o=n.currentPage,c=n.myRef,l=n.searchQuery,u=n.isLoading,m=!1;l!==t.searchQuery&&(m=!0),u!==e.isLoading&&u&&h(o,r,l).then((function(e){if(!e)return a.clearData(),void i.b.warn("No such results!");a.setState((function(t){return{itemsImg:m?Object(s.a)(e.hits.map((function(e){return{id:e.id,webformatURL:e.webformatURL,largeImageURL:e.largeImageURL,tags:e.tags}}))):[].concat(Object(s.a)(t.itemsImg),Object(s.a)(e.hits.map((function(e){return{id:e.id,webformatURL:e.webformatURL,largeImageURL:e.largeImageURL,tags:e.tags}})))),totalPage:Math.trunc(e.totalHits/t.perPage)+1,currentPage:t.currentPage+1,isLastPage:t.currentPage+1>=Math.trunc(e.totalHits/t.perPage)+1,isLoading:!1}})),c.current&&a.scrollToRef(c)})).catch((function(e){a.clearData(),i.b.error(e.message)}))}},{key:"render",value:function(){var e=this.state,t=e.itemsImg,a=e.isLoading,n=e.itemLooking,r=e.isLastPage,o=e.searchQuery,c=e.myRef;return Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(O,{onSetQuery:this.setSearchQuery}),Object(v.jsx)(w,{itemsImg:t,myRef:c,onClickImg:this.setItemLooking}),a&&Object(v.jsx)(D,{}),o&&!r&&!a&&Object(v.jsx)(P,{onClickMore:this.loadItemImg}),n&&Object(v.jsx)(E,{item:n,onCloseModal:this.clearItemLooking})]})}}]),a}(n.Component),K=F;var z=function(){return Object(v.jsxs)("div",{className:"App",children:[Object(v.jsx)(K,{}),Object(v.jsx)(i.a,{theme:"dark"})]})};c.a.render(Object(v.jsx)(r.a.StrictMode,{children:Object(v.jsx)(z,{})}),document.getElementById("root"))}},[[88,1,2]]]);
//# sourceMappingURL=main.9c7e808f.chunk.js.map